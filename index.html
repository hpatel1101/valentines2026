<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Valentine?</title>

<style>
  :root{
    --pink-bg:#ffb6c1;
    --btn:#ff2e63;
    --text:#1a1a1a;
    --photo-size:260px;
    --photo-radius:18px;
    --soft-shadow:0 14px 30px rgba(0,0,0,.22);
  }

  *{ box-sizing:border-box; }

  body{
    margin:0;
    min-height:100vh;
    font-family:-apple-system, BlinkMacSystemFont, "Apple Color Emoji","Segoe UI Emoji", sans-serif;
    background:radial-gradient(circle at 50% -15%, #ffd6e0 0%, var(--pink-bg) 45%, #ff9fb4 100%);
    text-align:center;
    overflow:hidden;
    color:var(--text);
  }

  #startWrap{
    min-height:100vh;
    display:grid;
    place-items:center;
    padding:24px;
  }

  #startBtn{
    padding:20px 28px;
    font-size:clamp(1.05rem, 2.5vw, 1.35rem);
    font-weight:700;
    border:none;
    border-radius:16px;
    background:var(--btn);
    color:#fff;
    box-shadow:0 10px 24px rgba(255,46,99,.35);
    cursor:pointer;
    transition:transform .18s ease, box-shadow .18s ease, filter .18s ease;
  }

  #startBtn:hover{
    transform:translateY(-1px) scale(1.01);
    box-shadow:0 14px 30px rgba(255,46,99,.42);
    filter:saturate(1.05);
  }

  #startBtn:active{ transform:translateY(1px) scale(0.99); }
  #startBtn:focus-visible{ outline:3px solid #fff; outline-offset:4px; }

  .fly{
    position:absolute;
    width:var(--photo-size);
    max-width:70vw;
    height:auto;
    border-radius:var(--photo-radius);
    box-shadow:var(--soft-shadow);
    opacity:0;
    transform:translate(0,0) scale(.98);
    will-change:transform, opacity;
    animation:driftAway 3.4s ease-in-out forwards;
  }

  @keyframes driftAway{
    0%   { opacity:0; transform:translate(0,0) scale(.98); }
    12%  { opacity:1; transform:translate(0,0) scale(1); }
    85%  { opacity:1; transform:translate(var(--x), var(--y)) scale(1); }
    100% { opacity:0; transform:translate(var(--x), var(--y)) scale(.98); }
  }

  #question{
    display:none;
    min-height:100vh;
    padding:18vh 18px 40px;
  }

  h1{
    margin:0;
    font-size:clamp(2rem, 5vw, 2.45rem);
    line-height:1.2;
    text-shadow:0 2px 0 rgba(255,255,255,.25);
  }

  #me{
    width:min(250px, 72vw);
    border-radius:22px;
    margin-top:18px;
    box-shadow:var(--soft-shadow);
  }

  #hint{
    margin:12px 0 0;
    font-size:.96rem;
    opacity:.78;
  }

  @media (prefers-reduced-motion: reduce){
    .fly{ animation-duration:1ms; }
    #startBtn{ transition:none; }
  }
</style>
</head>

<body>

<div id="startWrap">
  <button id="startBtn" aria-describedby="hint">Hardik wants you to click here ‚ù§Ô∏è</button>
  <p id="hint"></p>
</div>

<div id="question" aria-live="polite">
  <h1>Will you be my Valentine? üíò</h1>
  <img id="me" src="me.jpg" alt="Photo of me smiling">
</div>

<script>
const TOTAL = 10;
const GAP_MS = 600;
const DURATION_MS = 3400;
const PHOTO_COUNT = 5;

const startBtn = document.getElementById("startBtn");
const startWrap = document.getElementById("startWrap");
const question = document.getElementById("question");

preloadPhotos();
startBtn.addEventListener("click", start, { once:true });

function preloadPhotos(){
  for (let i = 1; i <= PHOTO_COUNT; i++) {
    const img = new Image();
    img.src = `pic${i}.jpg`;
  }
}

function start(){
  startWrap.style.display = "none";

  let i = 0;
  const timer = setInterval(() => {
    spawnOne(i);
    i++;
    if (i >= TOTAL) {
      clearInterval(timer);
      setTimeout(() => {
        question.style.display = "block";
      }, 900);
    }
  }, GAP_MS);

  spawnOne(i);
  i++;
}

function spawnOne(i){
  const img = document.createElement("img");
  img.src = `pic${(i % PHOTO_COUNT) + 1}.jpg`;
  img.alt = "Floating memory photo";
  img.className = "fly";

  const startX = window.innerWidth * 0.5;
  const startY = window.innerHeight * 0.48;

  const halfWidth = Math.min(parseFloat(getComputedStyle(document.documentElement).getPropertyValue("--photo-size")) || 260, window.innerWidth * 0.35) / 2;
  img.style.left = `${startX - halfWidth}px`;
  img.style.top = `${startY - 90}px`;

  const driftX = Math.random() * 520 - 260;
  const driftY = Math.random() * 520 - 260;

  img.style.setProperty("--x", `${driftX}px`);
  img.style.setProperty("--y", `${driftY}px`);

  document.body.appendChild(img);
  setTimeout(() => img.remove(), DURATION_MS + 100);
}

function dodgeNo(){
  noCount++;
  response.textContent = NO_TEXTS[(noCount - 1) % NO_TEXTS.length];
  response.classList.remove("shake");
  void response.offsetWidth;
  response.classList.add("shake");

  const maxX = Math.max(window.innerWidth - noBtn.offsetWidth - 20, 20);
  const maxY = Math.max(window.innerHeight - noBtn.offsetHeight - 20, 20);
  noBtn.style.position = "fixed";
  noBtn.style.left = `${Math.random() * (maxX - 20) + 10}px`;
  noBtn.style.top = `${Math.random() * (maxY - 20) + 10}px`;
}

function sayYes(){
  response.textContent = "YAYYY! Best decision ever ü•πüíò";
  noBtn.style.display = "none";
  yesBtn.textContent = "My Valentine ‚úÖ";
  yesBtn.disabled = true;
  yesBtn.style.opacity = ".9";

  for (let i = 0; i < 16; i++) {
    setTimeout(() => burstHeart(), i * 90);
  }
}

function burstHeart(){
  const heart = document.createElement("span");
  heart.className = "heart-burst";
  heart.textContent = ["üíñ", "üíò", "üíû", "‚ù§Ô∏è"][Math.floor(Math.random() * 4)];

  const x = window.innerWidth * (0.3 + Math.random() * 0.4);
  const y = window.innerHeight * (0.25 + Math.random() * 0.4);
  heart.style.left = `${x}px`;
  heart.style.top = `${y}px`;
  heart.style.setProperty("--tx", `${(Math.random() * 220) - 110}px`);
  heart.style.setProperty("--ty", `${-120 - Math.random() * 140}px`);

  document.body.appendChild(heart);
  setTimeout(() => heart.remove(), 1250);
}
</script>

</body>
</html>
