<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Valentine?</title>

<style>
  body{
    margin:0;
    font-family:-apple-system, BlinkMacSystemFont, "Apple Color Emoji","Segoe UI Emoji", sans-serif;
    background:#ffb6c1;
    text-align:center;
    overflow:hidden;
  }

  #startBtn{
    margin-top:40vh;
    padding:20px 28px;
    font-size:22px;
    border:none;
    border-radius:16px;
    background:#ff2e63;
    color:#fff;
    box-shadow: 0 14px 30px rgba(0,0,0,.18);
  }

  /* question card (looks nicer + gives photos something to frame) */
  #question{
    display:none;
    position:fixed;
    left:50%;
    top:50%;
    transform:translate(-50%,-50%);
    width:min(360px, 86vw);
    padding:18px 16px 16px;
    border-radius:24px;
    background: rgba(255,255,255,.35);
    backdrop-filter: blur(10px);
    border: 1px solid rgba(255,255,255,.35);
    box-shadow: 0 20px 50px rgba(0,0,0,.18);
    z-index:5;
  }

  h1{
    margin:4px 0 0;
    font-size:36px;
    color:#1a1a1a;
    text-shadow: 0 2px 0 rgba(255,255,255,.25);
  }

  #me{
    width:240px;
    border-radius:22px;
    margin-top:14px;
    box-shadow: 0 14px 30px rgba(0,0,0,.22);
  }

  /* BIG drifting photos */
  .fly{
    position:fixed;                 /* fixed so it behaves nicely with card */
    width:260px;
    max-width:70vw;
    height:auto;
    border-radius:18px;
    box-shadow: 0 14px 30px rgba(0,0,0,.22);
    opacity: 0;
    transform: translate(0,0) scale(0.98);
    will-change: transform, opacity;
    animation: driftAway 3.4s ease-in-out forwards;
    z-index:3;
  }

  @keyframes driftAway{
    0%   { opacity:0; transform: translate(0,0) scale(0.98); }
    12%  { opacity:1; transform: translate(0,0) scale(1.00); }
    85%  { opacity:1; transform: translate(var(--x), var(--y)) scale(1.00); }
    100% { opacity:0; transform: translate(var(--x), var(--y)) scale(0.98); }
  }

  /* When we "lock" a photo into the frame, it becomes a tile */
  .locked{
    opacity:1 !important;
    animation:none !important;
    transform: translate(0,0) scale(1) !important;
    transition: left 900ms cubic-bezier(.2,.9,.2,1), top 900ms cubic-bezier(.2,.9,.2,1);
    z-index:4;
  }
</style>
</head>

<body>

<button id="startBtn">Hardik wants you to click here ‚ù§Ô∏è</button>

<div id="question">
  <h1>Will you be my Valentine? üíò</h1>
  <img id="me" src="me.jpg" alt="me">
</div>

<script>
const TOTAL = 8;         // how many photos will end up framing the card
const GAP_MS = 650;      // slower sequence
const DURATION_MS = 3400;

// Frame positions around the question card (offsets from center).
// These are tuned to look good on iPhone.
const frameSpots = [
  { x: -200, y: -240 },
  { x:    0, y: -260 },
  { x:  200, y: -240 },
  { x: -240, y:  -40 },
  { x:  240, y:  -40 },
  { x: -200, y:  200 },
  { x:    0, y:  220 },
  { x:  200, y:  200 }
];

document.getElementById("startBtn").addEventListener("click", start, { once:true });

function start(){
  document.getElementById("startBtn").style.display = "none";

  let i = 0;
  const timer = setInterval(() => {
    spawnOne(i);
    i++;
    if (i >= TOTAL) {
      clearInterval(timer);
      // Show the card shortly before the last photos lock in
      setTimeout(() => {
        document.getElementById("question").style.display = "block";
      }, 900);
    }
  }, GAP_MS);
}

function spawnOne(i){
  const img = document.createElement("img");
  img.src = "pic" + ((i % 5) + 1) + ".jpg";
  img.className = "fly";

  // Start near center so you can SEE it clearly
  const startX = window.innerWidth * 0.5;
  const startY = window.innerHeight * 0.48;

  // Center the image around start point (approx half width/height)
  img.style.left = (startX - 130) + "px";
  img.style.top  = (startY - 90) + "px";

  // Gentle outward drift
  const driftX = (Math.random() * 520 - 260);
  const driftY = (Math.random() * 520 - 260);
  img.style.setProperty("--x", driftX + "px");
  img.style.setProperty("--y", driftY + "px");

  document.body.appendChild(img);

  // After the drift finishes, "lock" it into a frame spot and keep it
  setTimeout(() => {
    lockIntoFrame(img, i);
  }, DURATION_MS - 200);
}

function lockIntoFrame(img, i){
  const spot = frameSpots[i % frameSpots.length];

  // Ensure question card is visible by the time we lock
  document.getElementById("question").style.display = "block";

  // Convert to locked tile
  img.classList.add("locked");

  // Position relative to center of screen
  const centerX = window.innerWidth * 0.5;
  const centerY = window.innerHeight * 0.5;

  // Move it to the target "frame" position
  img.style.left = (centerX + spot.x - 130) + "px";
  img.style.top  = (centerY + spot.y - 90) + "px";
}
</script>

</body>
</html>
